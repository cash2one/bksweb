!function($){var t={},e=0;$.galleriffic={version:"2.0.1",normalizeHash:function(t){return t.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(e){return e?(e=$.galleriffic.normalizeHash(e),t[e]):void 0},gotoImage:function(t){var e=$.galleriffic.getImage(t);if(!e)return!1;var i=e.gallery;return i.gotoImage(e),!0},removeImageByHash:function(t,e){var i=$.galleriffic.getImage(t);if(!i)return!1;var n=i.gallery;return e&&e!=n?!1:n.removeImageByIndex(i.index)}};var n={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};$.fn.galleriffic=function(a){$.extend(this,{version:$.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(t,e){if(this.pause(),!this.enableHistory){var i=$.galleriffic.normalizeHash($(e).attr("href"));$.galleriffic.gotoImage(i),t.preventDefault()}},appendImage:function(t){return this.addImage(t,!1,!1),this},insertImage:function(t,e){return this.addImage(t,!1,!0,e),this},addImage:function(i,n,a,s){var r="string"==typeof i?$(i):i,o=r.find("a.thumb"),h=o.attr("href"),l=o.attr("title"),d=r.find(".caption").remove(),u=o.attr("name");e++,(!u||t[""+u])&&(u=e),a||(s=this.data.length);var c={title:l,slideUrl:h,caption:d,hash:u,gallery:this,index:s};a?(this.data.splice(s,0,c),this.updateIndices(s)):this.data.push(c);var g=this;return n||this.updateThumbs(function(){var t=g.find("ul.thumbs");a?t.children(":eq("+s+")").before(r):t.append(r),g.onImageAdded&&g.onImageAdded(c,r)}),t[""+u]=c,o.attr("rel","history").attr("href","#"+u).removeAttr("name").click(function(t){g.clickHandler(t,this)}),this},removeImageByIndex:function(t){if(0>t||t>=this.data.length)return!1;var e=this.data[t];return e?(this.removeImage(e),!0):!1},removeImageByHash:function(t){return $.galleriffic.removeImageByHash(t,this)},removeImage:function(e){var i=e.index;return this.data.splice(i,1),delete t[""+e.hash],this.updateThumbs(function(){var t=s.find("ul.thumbs").children(":eq("+i+")").remove();s.onImageRemoved&&s.onImageRemoved(e,t)}),this.updateIndices(i),this},updateIndices:function(t){for(i=t;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var t=this;return this.find("ul.thumbs > li").each(function(e){t.addImage($(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var t=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,t)},preloadRelocate:function(t){return this.preloadStartIndex=t,this},preloadRecursive:function(t,e){if(t!=this.preloadStartIndex){var i=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,i)}var n=this,a=e-t;if(0>a&&(a=this.data.length-1-t+e),this.preloadAhead>=0&&a>this.preloadAhead)return setTimeout(function(){n.preloadRecursive(t,e)},500),this;var s=this.data[e];if(!s)return this;if(s.image)return this.preloadNext(t,e);var r=new Image;return r.onload=function(){s.image=this,n.preloadNext(t,e)},r.alt=s.title,r.src=s.slideUrl,this},preloadNext:function(t,e){var i=this.getNextIndex(e);if(i==t)this.isPreloadComplete=!0;else{var n=this;setTimeout(function(){n.preloadRecursive(t,i)},100)}return this},getNextIndex:function(t){var e=t+1;return e>=this.data.length&&(e=0),e},getPrevIndex:function(t){var e=t-1;return 0>e&&(e=this.data.length-1),e},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var t=this;this.slideshowTimeout=setTimeout(function(){t.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(t,e){return this.gotoIndex(this.getNextIndex(this.currentImage.index),t,e),this},previous:function(t,e){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),t,e),this},nextPage:function(t,e){var i=this.getCurrentPage(),n=this.getNumPages()-1;if(n>i){var a=i*this.numThumbs,s=a+this.numThumbs;this.gotoIndex(s,t,e)}return this},previousPage:function(t,e){var i=this.getCurrentPage();if(i>0){var n=i*this.numThumbs,a=n-this.numThumbs;this.gotoIndex(a,t,e)}return this},gotoIndex:function(t,e,i){e||this.pause(),0>t?t=0:t>=this.data.length&&(t=this.data.length-1);var n=this.data[t];return!i&&this.enableHistory?$.historyLoad(String(n.hash)):this.gotoImage(n),this},gotoImage:function(t){var e=t.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,e),this.currentImage=t,this.preloadRelocate(e),this.refresh(),this},getDefaultTransitionDuration:function(t){return t?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var t=this.currentImage;if(!t)return this;var e=t.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(e)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(e)].hash);var i=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),n=0;this.$captionContainer&&(n=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var a=this.syncTransitions&&t.image,s=!0,r=this,o=function(){s=!1,i.remove(),n&&n.remove(),a||(t.image&&t.hash==r.data[r.currentImage.index].hash?r.buildImage(t,a):r.$loadingContainer&&r.$loadingContainer.show())};if(0==i.length?o():this.onTransitionOut?this.onTransitionOut(i,n,a,o):(i.fadeTo(this.getDefaultTransitionDuration(a),0,o),n&&n.fadeTo(this.getDefaultTransitionDuration(a),0)),a&&this.buildImage(t,a),!t.image){var h=new Image;h.onload=function(){t.image=this,s||t.hash!=r.data[r.currentImage.index].hash||r.buildImage(t,a)},h.alt=t.title,h.src=t.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(t,e){var i=this,n=this.getNextIndex(t.index),a=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[n].hash+'" title="'+t.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");a.find("a").append(t.image).click(function(t){i.clickHandler(t,this)});var s=0;return this.$captionContainer&&(s=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(t.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(a,s,e):(a.fadeTo(this.getDefaultTransitionDuration(e),1),s&&s.fadeTo(this.getDefaultTransitionDuration(e),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){i.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){var t=this.getCurrentPage();t!=this.displayedPage&&this.updateThumbs();var e=this.find("ul.thumbs").children();return e.filter(".selected").removeClass("selected"),e.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(t){var e=this,i=function(){t&&t(),e.rebuildThumbs(),e.onPageTransitionIn?e.onPageTransitionIn():e.show()};return this.onPageTransitionOut?this.onPageTransitionOut(i):(this.hide(),i()),this},rebuildThumbs:function(){var t=this.data.length>this.numThumbs;if(this.enableTopPager){var e=this.find("div.top");0==e.length?e=this.prepend('<div class="top pagination"></div>').find("div.top"):e.empty(),t&&this.buildPager(e)}if(this.enableBottomPager){var i=this.find("div.bottom");0==i.length?i=this.append('<div class="bottom pagination"></div>').find("div.bottom"):i.empty(),t&&this.buildPager(i)}var n=this.getCurrentPage(),a=n*this.numThumbs,s=a+this.numThumbs-1;s>=this.data.length&&(s=this.data.length-1);var r=this.find("ul.thumbs");return r.find("li").each(function(t){var e=$(this);t>=a&&s>=t?e.show():e.hide()}),this.displayedPage=n,r.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(t){var e=this,i=this.getNumPages(),n=this.getCurrentPage(),a=n*this.numThumbs,s=this.maxPagesToShow-1,r=n-Math.floor((this.maxPagesToShow-1)/2)+1;if(r>0){var o=i-r;s>o&&(r-=s-o)}if(0>r&&(r=0),n>0){var h=a-this.numThumbs;t.append('<a rel="history" href="#'+this.data[h].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(r>0&&(this.buildPageLink(t,0,i),r>1&&t.append('<span class="ellipsis">&hellip;</span>'),s--);s>0;)this.buildPageLink(t,r,i),s--,r++;if(i>r){var l=i-1;l>r&&t.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(t,l,i)}var d=a+this.numThumbs;return d<this.data.length&&t.append('<a rel="history" href="#'+this.data[d].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),t.find("a").click(function(t){e.clickHandler(t,this)}),this},buildPageLink:function(t,e,i){var n=e+1,a=this.getCurrentPage();if(e==a)t.append('<span class="current">'+n+"</span>");else if(i>e){var s=e*this.numThumbs;t.append('<a rel="history" href="#'+this.data[s].hash+'" title="'+n+'">'+n+"</a>")}return this}}),$.extend(this,n,a),this.enableHistory&&!$.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=$(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=$(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=$(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var s=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=$(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'">'+this.pauseLinkText+"</a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'">'+this.playLinkText+"</a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(t){return s.toggleSlideshow(),t.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'">'+this.prevLinkText+'</a><a class="next" rel="history" title="'+this.nextLinkText+'">'+this.nextLinkText+"</a></div>").find("div.nav-controls a").click(function(t){s.clickHandler(t,this)}));var r=!this.enableHistory||!location.hash;if(this.enableHistory&&location.hash){var o=$.galleriffic.normalizeHash(location.hash),h=t[o];h||(r=!0)}return r&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&$(document).keydown(function(t){var e=t.charCode?t.charCode:t.keyCode?t.keyCode:0;switch(e){case 32:s.next(),t.preventDefault();break;case 33:s.previousPage(),t.preventDefault();break;case 34:s.nextPage(),t.preventDefault();break;case 35:s.gotoIndex(s.data.length-1),t.preventDefault();break;case 36:s.gotoIndex(0),t.preventDefault();break;case 37:s.previous(),t.preventDefault();break;case 39:s.next(),t.preventDefault()}}),this.autoStart&&this.play(),setTimeout(function(){s.preloadInit()},1e3),this}}(jQuery);