!function($){var t={bgColor:"#ccc",fgColor:"red",size:160,donutwidth:30,textsize:28},i={init:function(s){var e=!0;if("object"==typeof s?(this.donutchartsettings=$.extend({},t,s),s.size&&!s.donutwidth&&(this.donutchartsettings.donutwidth=s.size/5.33),s.size&&!s.textsize&&(this.donutchartsettings.textsize=s.size/2.71)):"object"==typeof this.donutchartsettings?e=!1:this.donutchartsettings=t,e){$(this).css("position","relative"),$(this).css("width",this.donutchartsettings.size+"px"),$(this).css("height",this.donutchartsettings.size+"px"),$(this).html("<canvas width='"+this.donutchartsettings.size+"' height='"+this.donutchartsettings.size+"'></canvas><div style='position:absolute;top:1px;left:5px;line-height:"+this.donutchartsettings.size+"px;text-align:center;width:"+this.donutchartsettings.size+"px;font-family:Arial,sans-serif;font-size:"+this.donutchartsettings.textsize+"px;'></div>");var n=$("canvas",this).get(0);"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(n);var h=n.getContext("2d");i.drawBg.call(h,this.donutchartsettings)}},drawBg:function(t){this.clearRect(0,0,t.size,t.size),this.beginPath(),this.fillStyle=t.bgColor,this.arc(t.size/2,t.size/2,t.size/2,0,2*Math.PI,!1),this.arc(t.size/2,t.size/2,t.size/2-t.donutwidth,0,2*Math.PI,!0),this.fill()},drawFg:function(t,i){var s=i/100*360,e=-90*Math.PI/180,n=Math.PI*(-90+s)/180;this.beginPath(),this.fillStyle=t.fgColor,this.arc(t.size/2,t.size/2,t.size/2,e,n,!1),this.arc(t.size/2,t.size/2,t.size/2-t.donutwidth,n,e,!0),this.fill()}};$.fn.donutchart=function(t){return this.each(function(){function s(){o++,i.drawBg.call(r,a),i.drawFg.apply(r,[a,o]),h.text(o+"%"),o>=e&&clearInterval(c)}if(i.init.call(this,t),"animate"==t){var e=$(this).attr("data-percent"),n=$(this).children("canvas").get(0),h=$(this).children("div"),a=this.donutchartsettings;if(n.getContext)var r=n.getContext("2d"),o=0,c=setInterval(s,20)}})}}(jQuery);